<div fxLayout="row wrap" class="animate__animated animate__fadeIn">
  <div fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100">
    <mat-card>
      <mat-toolbar color="primary">
        <mat-toolbar-row class="toolbarBack">
          <mat-card-title>Usuario</mat-card-title>
          <span></span>
          <span class="example-spacer"></span>
          <span>
            <button mat-icon-button matTooltip='Regresar' routerLink="/seguridad/usuarios" *ngIf="visible">
              <mat-icon>arrow_back_ios</mat-icon>
            </button>
            <button mat-icon-button matTooltip='Guardar' form="formaUsuarios">
              <mat-icon>save</mat-icon>
            </button>
          </span>
        </mat-toolbar-row>
      </mat-toolbar>
      <mat-card-content>
        <form [formGroup]="forma" id="formaUsuarios" autocomplete="off" (submit)="guardar()">

          <div fxLayout="row wrap">
            <div fxFlex.gt-sm="35%" fxFlex="100">
              <mat-card>
                <mat-toolbar color="primary">
                  <mat-toolbar-row class="toolbarBack">
                    <mat-card-title>Fotografía</mat-card-title>
                  </mat-toolbar-row>
                </mat-toolbar>
                <mat-card-content>
                  <div fxLayout="row" fxLayoutGap="10px" fxLayout.xs="column">
                    <div fxFlex="100" fxLayoutAlign="center center">
                        <mat-card-subtitle>Coloca una imagen para mejor identificación</mat-card-subtitle>
                    </div>
                  </div>
                  <div fxLayout="row" fxLayoutGap="10px" fxLayout.xs="column">
                    <div fxFlex="100"  fxLayoutAlign="center center" >
                      <button mat-raised-button color="primary" (click)="_fileInput.click()" type="button" >
                        <mat-icon>image</mat-icon>&nbsp;Seleccionar tu foto de perfil
                      </button>
                      <input #_fileInput type="file" (change)="cargarFoto($event)" accept="image/*" hidden>
                    </div>
                  </div>
                  <div><br /></div>
                  <div fxLayout="row" fxLayoutGap="10px" fxLayout.xs="column" >
                    <div fxFlex="auto" fxFlex.lt-md="49" fxFlex.lt-sm="99" fxFill fxLayoutAlign="center center">

                        <div *ngIf="fotoPerfil && fotoPerfil !== ''">
                          <img class="animate__animated animate__fadeIn"  mat-card-image [src]="fotoPerfil" [alt]="forma.value.name" width="240" height="240" style=" border-radius: 50%;
                          height: 240px;
                          object-fit: cover;
                          object-position: center;
                          width: 240px;">
                        </div>

                    </div>
                  </div>
                  <p></p>
                </mat-card-content>
              </mat-card>
            </div>
            <div fxFlex.gt-sm="65%" fxFlex="100">
              <mat-card>
                <mat-toolbar color="primary">
                  <mat-toolbar-row class="toolbarBack">
                    <mat-card-title>Datos personales</mat-card-title>
                  </mat-toolbar-row>
                </mat-toolbar>
                <mat-card-content>
                  <div fxLayout="row" fxLayoutGap="10px" fxLayout.xs="column">
                    <div fxFlex="40">
                      <mat-form-field appearance="outline">
                        <mat-label>Código</mat-label>
                        <mat-icon matSuffix>edit</mat-icon>
                        <input matInput formControlName="codigo" />
                        <mat-error>
                          Campo requerido
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div fxFlex="60">
                      <mat-form-field appearance="outline">
                        <mat-label>Nombre(s)</mat-label>
                        <mat-icon matSuffix>edit</mat-icon>
                        <input matInput formControlName="nombre" />
                        <mat-error>
                          Campo requerido
                        </mat-error>
                      </mat-form-field>
                    </div>
                  </div>
                  <div fxLayout="row" fxLayoutGap="10px" fxLayout.xs="column">
                    <div fxFlex="50">
                      <mat-form-field appearance="outline">
                        <mat-label>Apellido Paterno</mat-label>
                        <mat-icon matSuffix>edit</mat-icon>
                        <input matInput formControlName="apellidoPaterno" />
                        <mat-error>
                          Campo requerido
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div fxFlex="50">
                      <mat-form-field appearance="outline">
                        <mat-label>Apellido Materno</mat-label>
                        <mat-icon matSuffix>edit</mat-icon>
                        <input matInput formControlName="apellidoMaterno" />
                        <mat-error>
                          Campo requerido
                        </mat-error>
                      </mat-form-field>
                    </div>
                  </div>
                  <div fxLayout="row" fxLayoutGap="10px" fxLayout.xs="column">
                    <div fxFlex="auto">
                      <mat-form-field appearance="outline">
                        <mat-label>Teléfono</mat-label>
                        <mat-icon matSuffix>edit</mat-icon>
                        <input matInput type="text" appPhoneMask formControlName="telefono" />
                        <mat-error *ngIf="f.telefono.touched && f.telefono.errors">
                          <div *ngIf="f.telefono.errors.required">
                            Campo requerido
                          </div>
                          <div *ngIf="f.celular.errors.pattern">
                            Ingrese solo numeros
                          </div>
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div fxFlex="auto">
                      <mat-form-field appearance="outline">
                        <mat-label>Celular</mat-label>
                        <mat-icon matSuffix>edit</mat-icon>
                        <input matInput type="text" appPhoneMask formControlName="celular"/>
                        <mat-error *ngIf="f.celular.touched && f.celular.errors">
                          <div *ngIf="f.celular.errors.required">
                            Campo requerido
                          </div>
                          <div *ngIf="f.celular.errors.pattern">
                            Ingrese solo numeros
                          </div>
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div fxFlex="auto">
                      <mat-form-field appearance="outline">
                        <mat-label>E-mail</mat-label>
                        <mat-icon matSuffix>edit</mat-icon>
                        <input matInput formControlName="email" type="email" />
                        <mat-error *ngIf="f.email.touched && f.email.errors">
                          <div *ngIf="f.email.errors.required">
                            Campo requerido
                          </div>
                          <div *ngIf="this.forma.get('email').hasError('email')">
                            Formato de email incorrecto
                          </div>
                        </mat-error>
                      </mat-form-field>
                    </div>
                  </div>

                </mat-card-content>
              </mat-card>
              <mat-card *ngIf="visible">
                <mat-toolbar color="primary">
                  <mat-toolbar-row class="toolbarBack">
                    <mat-card-title>Perfíl</mat-card-title>
                  </mat-toolbar-row>
                </mat-toolbar>
                <mat-card-content>
                  <mat-card-subtitle>Tu perfil es el que se encuentra seleccionado</mat-card-subtitle>
                  <mat-chip-list *ngFor="let perfil of listaPerfiles" style="display: inline-block;">
                    &nbsp;&nbsp;<mat-chip selectable="true" removable="true" (click)="asignarPerfil(perfil)"
                      [selected]="perfil.seleccionado">{{perfil.descripcion}}
                      <!-- <mat-icon matChipRemove (click)="removerPerfil(perfil)">cancel</mat-icon> -->
                      <mat-icon matChipRemove *ngIf="!perfil.seleccionado" (click)="removerPerfil(perfil)">cancel</mat-icon>
                      <mat-icon matChipRemove *ngIf="perfil.seleccionado" (click)="removerPerfil(perfil)">done</mat-icon>
                    </mat-chip>
                  </mat-chip-list>
                </mat-card-content>
              </mat-card>
              <!-- <mat-card>
                <mat-toolbar color="primary">
                  <mat-toolbar-row class="toolbarBack">
                    <mat-card-title>Permisos</mat-card-title>
                  </mat-toolbar-row>
                </mat-toolbar>
                <mat-card-content>
                  <mat-card-subtitle>Lo siguiente es lo que puede realizar el usuario dentro de la aplicación
                  </mat-card-subtitle>
                  <mat-chip-list *ngFor="let permiso of listaPermisos" style="display: inline-block;">
                    &nbsp;&nbsp;<mat-chip selectable="true" removable="true"
                      [selected]="permiso.seleccionado">{{permiso.descripcion}}
                      <mat-icon matChipRemove *ngIf="!permiso.seleccionado">cancel</mat-icon>
                      <mat-icon matChipRemove *ngIf="permiso.seleccionado">done</mat-icon>

                    </mat-chip>
                  </mat-chip-list>
                  <p></p>
                </mat-card-content>
              </mat-card> -->
            </div>
            <div fxFlex.gt-sm="100%" fxFlex="100" fxLayout.xs="column">
              <mat-card>



                <mat-toolbar color="primary">
                  <mat-toolbar-row class="toolbarBack">
                    <mat-card-title>Contraseña</mat-card-title>
                  </mat-toolbar-row>
                </mat-toolbar>
                <mat-card-content>
                  <div *ngIf="chkActualiza">
                    <mat-slide-toggle class="example-margin" [color]="color" [checked]="checked" [disabled]="disabled"
                      (change)="actualizarContrasena($event)">¿Desea actualizar el password?
                    </mat-slide-toggle>
                  </div>


                  <div *ngIf="actualizar">
                    <mat-card-subtitle>Ingresa una contraseña de maximo 8 caracteres, incluye (*-._#$%&), números y por
                      lo
                      menos una letra mayuscula.</mat-card-subtitle>
                    <div fxLayout="row" fxLayoutGap="10px" fxLayout.xs="column">

                      <div fxFlex="auto">
                        <mat-form-field appearance="outline">
                          <mat-label>Contraseña</mat-label>
                          <mat-icon matSuffix>edit</mat-icon>
                          <input matInput formControlName="contrasena" minlength="8" />
                          <mat-error *ngIf="f.contrasena.touched && f.contrasena.errors">
                            <div *ngIf="f.contrasena.errors.required">
                              Contraseña requerida
                            </div>
                            <div *ngIf="f.contrasena.errors.pattern">
                              Contraseña no valida
                            </div>
                            <div *ngIf="this.forma.get('contrasena').hasError('minlength')">
                              Ingrese una contraseña minima 8 caracteres
                            </div>
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <div fxFlex="auto">
                        <mat-form-field appearance="outline">
                          <mat-label>Confirmación de contraseña</mat-label>
                          <mat-icon matSuffix>edit</mat-icon>
                          <input matInput formControlName="contrasenaConfirmacion" minlength="8" />
                          <mat-error *ngIf="f.contrasenaConfirmacion.touched && f.contrasenaConfirmacion.errors">
                            <div *ngIf="f.contrasenaConfirmacion.errors.required">
                              Contraseña requerida
                            </div>
                            <div *ngIf="f.contrasenaConfirmacion.errors.pattern">
                              Contraseña no valida
                            </div>
                            <div *ngIf="this.forma.get('contrasenaConfirmacion').hasError('minlength')">
                              Ingrese una contraseña minima 8 caracteres
                            </div>
                          </mat-error>
                        </mat-form-field>
                      </div>
                    </div>
                  </div>

                </mat-card-content>

              </mat-card>
            </div>
          </div>
        </form>
      </mat-card-content>
    </mat-card>
  </div>
</div>
